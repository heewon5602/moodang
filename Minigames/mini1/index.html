<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Graduate School of Education - Rush Hour</title>
    <link rel="stylesheet" type="text/css" href="css/rushHour.css">
    <link href="https://fonts.googleapis.com/css?family=Skranji:400,700" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="src/car.js"></script>
    <script src="src/board.js"></script>
    <script src="src/game.js"></script>
    <script>
        $(document).ready(function() {
            // Initially show level selection screen
            showLevelSelection();

            // Handle level selection
            $('#start-game').click(function(){
                var selectedLevel = $("select[name='level']").val();
                startGame(selectedLevel);
            });

            // Handle return to level selection
            $('#change-level').click(function(){
                showLevelSelection();
            });

            function showLevelSelection() {
                $('.game-container, #change-level').hide();
                $('#select-level').show();
            }

			function startGame(level) {
				var $container = $('#rush-hour');
				//var Game;

				switch (level){
					case 'easy':
						var Game = setUpRushHourGame('easy', $container);
						//$('#required-wins').text("Clear 3 games to win");
						break;
			
					case 'medium':
						var Game = setUpRushHourGame('medium', $container);
						//$('#required-wins').text("Clear 2 games to win");
						break;

					case 'hard':
						var Game = setUpRushHourGame('hard', $container);
						//$('#required-wins').text("Clear 1 game to win");
						break;
				}

				$('#select-level').hide();
				$('#moodang').hide();
				$('.game-container, #change-level').show();
			}
			
			$("select[name='level']").on('change', function() {
				var selectedLevel = $(this).val();
				switch (selectedLevel) {
					case 'easy':
						$('#required-wins').text("Clear 3 games to win");
						break;
					case 'medium':
						$('#required-wins').text("Clear 2 games to win");
						break;
					case 'hard':
						$('#required-wins').text("Clear 1 game to win");
						break;
				}
			}).trigger('change');  // 이를 사용하여 페이지 로드 시 이벤트를 한 번 실행합니다.

        });
    </script>
</head>

<body>
<div class="main-container">
    <div class="instructions-container">
        <h1 class="instructions">This station is <strong>Graduate School of Education</strong></h1>
		<h2 class="instructions">Get MoodangE to the exit!</h1
        <h2 class="instructions">First Click to select car; Then use ▲ ▼ ◀ ▶ to move the car </h1>
        <h2 class="instructions-note">Note that cars can only move backwards or forwards in their orientation</h1>
    </div>
	<div id="moodang">
	<img src="./moodang.png"></img> </div>
    <div class="game-container">
        <div class="controls">
            <div class="exit">Exit</div>
        </div>
        <div id="rush-hour""></div>
        <div class="win-phrase">Great job!</div>
    </div>

    <div id="select-level">
        <br>
        <label for="level">Select Level:</label>
        <select name="level" id="level">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
        </select>
        <div id="required-wins">Clear 3 games to win</div>
        <button id="start-game">Start Game</button>
    </div>

    <button id="change-level" style="display:none;">Change Level</button>
</div>
</body>
</html>
